{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/arthur/UEM/DesenvolvimentoPET/pet-ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/arthur/UEM/DesenvolvimentoPET/pet-ui/src/Components/Eventos/DadosAdiconais/confirmacaoInscrito.js\";\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  display: block;\\n  margin: 0 auto;\\n  border-color: white;\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component, Fragment } from 'react';\nimport Axios from 'axios';\nimport Swal from 'sweetalert2';\nimport { Redirect } from 'react-router-dom';\nimport DadosAdicionais from './dadosAdicionais';\nimport PathName from '../../pathConst';\nimport Header from '../../Header/Header';\nimport formatDate from '../formatDate';\nimport { css } from '@emotion/core';\nimport ClipLoader from 'react-spinners/ClipLoader';\nconst override = css(_templateObject());\n\nclass confirmaçãoInscrito extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      usuario: [],\n      evento: [],\n      success: false,\n      valoresEvento: [],\n      voltarDadosAdicionais: false,\n      voltarEvento: false,\n      Token: {}\n    };\n\n    this.formatValor = valor => {\n      return valor === 0 ? 'Gratuito' : \"R$ \".concat(valor);\n    };\n\n    this.getStyleButton = () => {\n      const success = this.state.success;\n      return !success ? 'btn blue lighten-1 right' : 'btn green right';\n    };\n\n    this.handleClickVoltar = () => {\n      const evento = this.state.evento;\n\n      if (evento.hasDadoAdicional) {\n        this.setState({\n          voltarDadosAdicionais: true\n        });\n      } else {\n        this.setState({\n          voltarEvento: true\n        });\n      }\n    };\n\n    this.handleClick = () => {\n      const _this$props = this.props,\n            respostas = _this$props.respostas,\n            idEvento = _this$props.idEvento;\n      this.setState({\n        sendState: true\n      });\n      const newInscrito = {\n        pago: false,\n        cargaHoraria: 0,\n        usuarioId: this.state.usuario.id,\n        eventoId: idEvento\n      };\n      Axios.post(\"http://\".concat(PathName, \"/pet/api/Inscritos\"), newInscrito, this.state.Token).then(async res => {\n        const status = await res.status;\n\n        if (status >= 200 && status < 300) {\n          const inscritoId = res.data.id;\n\n          if (respostas.length === 0) {\n            // se o evento não possui dados adicionais\n            this.setState({\n              voltarEvento: true\n            });\n            return Swal.fire({\n              type: 'success',\n              title: 'Inscrição realizada com sucesso'\n            });\n          } else {\n            respostas.map(resp => resp.inscritoId = inscritoId);\n            Axios.post(\"http://\".concat(PathName, \"/pet/api/Respostas/array\"), {\n              data: respostas\n            }, this.state.Token).then(resp => {\n              this.setState({\n                voltarEvento: true\n              });\n              return Swal.fire({\n                type: 'success',\n                title: 'Inscrição realizada com sucesso',\n                text: 'Foi enviado uma confirmação de inscrição da atividade para seu e-mail'\n              });\n            }).catch(err => {\n              return Swal.fire({\n                type: 'error',\n                title: 'Ops! algo deu errado',\n                text: err.response.data.message\n              });\n            });\n          }\n        }\n      }).catch(err => {\n        return Swal.fire({\n          type: 'error',\n          title: 'Ops! algo deu errado',\n          text: err.response.data.error.message\n        });\n      });\n    };\n  }\n\n  componentWillMount() {\n    const idEvento = this.props.idEvento;\n    const userID = localStorage.getItem('user_id');\n    const token = localStorage.getItem('access_token');\n    const Token = {\n      headers: {\n        Authorization: token\n      }\n    };\n    const filterEvento = {\n      include: 'valores'\n    };\n    this.setState({\n      Token: Token\n    });\n    Axios.all([Axios.get(\"http://\".concat(PathName, \"/pet/api/Usuarios/\").concat(userID), Token), Axios.get(\"http://\".concat(PathName, \"/pet/api/Eventos/\").concat(idEvento, \"?filter=\").concat(JSON.stringify(filterEvento)))]).then(Axios.spread((usuarioRes, eventoRes) => {\n      this.setState({\n        usuario: usuarioRes.data,\n        evento: eventoRes.data,\n        valoresEvento: eventoRes.data.valores\n      });\n    }));\n  }\n\n  render() {\n    const _this$state = this.state,\n          usuario = _this$state.usuario,\n          evento = _this$state.evento,\n          valoresEvento = _this$state.valoresEvento,\n          voltarDadosAdicionais = _this$state.voltarDadosAdicionais,\n          voltarEvento = _this$state.voltarEvento;\n    const idEvento = this.props.idEvento;\n\n    if (voltarDadosAdicionais) {\n      return React.createElement(DadosAdicionais, {\n        idEvento: idEvento,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      });\n    }\n\n    if (voltarEvento) {\n      return React.createElement(Redirect, {\n        to: \"/pet/eventos/\".concat(idEvento),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-panel z-depth-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"sobre\",\n      className: \"col s12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"material-icons left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"person\"), \"Suas informa\\xE7\\xF5es\"), React.createElement(\"div\", {\n      className: \"basicInfo grey-text text-darken-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Nome:\"), React.createElement(\"span\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, usuario.nome)), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"CPF:\"), React.createElement(\"span\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, usuario.cpf)), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"E-mail:\"), React.createElement(\"span\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, usuario.email))), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"material-icons left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"event\"), \"Informa\\xE7\\xF5es do evento\"), React.createElement(\"div\", {\n      className: \"basicInfo grey-text text-darken-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"Nome:\"), React.createElement(\"span\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, evento.nome)), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, \"Data de \\xEDnicio:\"), React.createElement(\"span\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, formatDate(String(evento.dataInicio)))), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"Data t\\xE9rmino:\"), React.createElement(\"span\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, formatDate(String(evento.dataFim)))), valoresEvento.map(valor => React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, valor.nome), React.createElement(\"span\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, this.formatValor(valor.preco))))), React.createElement(\"div\", {\n      className: \"card-action\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sweet-loading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.handleClick,\n      className: this.getStyleButton(),\n      style: {\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        width: '150px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, this.state.sendState ? React.createElement(ClipLoader, {\n      css: override,\n      sizeUnit: 'px',\n      size: 25,\n      color: 'white',\n      loading: this.state.sendState,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }) : 'Inscrever-me'), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn blue lighten-1 left\",\n      onClick: this.handleClickVoltar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, 'Voltar')))))));\n  }\n\n}\n\nexport default confirmaçãoInscrito;","map":{"version":3,"sources":["/home/arthur/UEM/DesenvolvimentoPET/pet-ui/src/Components/Eventos/DadosAdiconais/confirmacaoInscrito.js"],"names":["React","Component","Fragment","Axios","Swal","Redirect","DadosAdicionais","PathName","Header","formatDate","css","ClipLoader","override","confirmaçãoInscrito","state","usuario","evento","success","valoresEvento","voltarDadosAdicionais","voltarEvento","Token","formatValor","valor","getStyleButton","handleClickVoltar","hasDadoAdicional","setState","handleClick","props","respostas","idEvento","sendState","newInscrito","pago","cargaHoraria","usuarioId","id","eventoId","post","then","res","status","inscritoId","data","length","fire","type","title","map","resp","text","catch","err","response","message","error","componentWillMount","userID","localStorage","getItem","token","headers","Authorization","filterEvento","include","all","get","JSON","stringify","spread","usuarioRes","eventoRes","valores","render","nome","cpf","email","String","dataInicio","dataFim","preco","textOverflow","whiteSpace","overflow","width"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport Axios from 'axios';\nimport Swal from 'sweetalert2';\nimport { Redirect } from 'react-router-dom';\nimport DadosAdicionais from './dadosAdicionais';\nimport PathName from '../../pathConst';\nimport Header from '../../Header/Header';\nimport formatDate from '../formatDate';\nimport { css } from '@emotion/core';\nimport ClipLoader from 'react-spinners/ClipLoader';\nconst override = css`\n  display: block;\n  margin: 0 auto;\n  border-color: white;\n`;\nclass confirmaçãoInscrito extends Component {\n  componentWillMount() {\n    const { idEvento } = this.props;\n    const userID = localStorage.getItem('user_id');\n    const token = localStorage.getItem('access_token');\n    const Token = {\n      headers: {\n        Authorization: token\n      }\n    };\n    const filterEvento = {\n      include: 'valores'\n    };\n    this.setState({ Token: Token });\n    Axios.all([\n      Axios.get(`http://${PathName}/pet/api/Usuarios/${userID}`, Token),\n      Axios.get(\n        `http://${PathName}/pet/api/Eventos/${idEvento}?filter=${JSON.stringify(\n          filterEvento\n        )}`\n      )\n    ]).then(\n      Axios.spread((usuarioRes, eventoRes) => {\n        this.setState({\n          usuario: usuarioRes.data,\n          evento: eventoRes.data,\n          valoresEvento: eventoRes.data.valores\n        });\n      })\n    );\n  }\n\n  state = {\n    usuario: [],\n    evento: [],\n    success: false,\n    valoresEvento: [],\n    voltarDadosAdicionais: false,\n    voltarEvento: false,\n    Token: {}\n  };\n\n  formatValor = valor => {\n    return valor === 0 ? 'Gratuito' : `R$ ${valor}`;\n  };\n  getStyleButton = () => {\n    const { success } = this.state;\n    return !success ? 'btn blue lighten-1 right' : 'btn green right';\n  };\n\n  handleClickVoltar = () => {\n    const { evento } = this.state;\n    if (evento.hasDadoAdicional) {\n      this.setState({ voltarDadosAdicionais: true });\n    } else {\n      this.setState({ voltarEvento: true });\n    }\n  };\n\n  handleClick = () => {\n    const { respostas, idEvento } = this.props;\n    this.setState({ sendState: true });\n    const newInscrito = {\n      pago: false,\n      cargaHoraria: 0,\n      usuarioId: this.state.usuario.id,\n      eventoId: idEvento\n    };\n    Axios.post(\n      `http://${PathName}/pet/api/Inscritos`,\n      newInscrito,\n      this.state.Token\n    )\n      .then(async res => {\n        const status = await res.status;\n        if (status >= 200 && status < 300) {\n          const inscritoId = res.data.id;\n          if (respostas.length === 0) {\n            // se o evento não possui dados adicionais\n            this.setState({ voltarEvento: true });\n            return Swal.fire({\n              type: 'success',\n              title: 'Inscrição realizada com sucesso'\n            });\n          } else {\n            respostas.map(resp => (resp.inscritoId = inscritoId));\n            Axios.post(\n              `http://${PathName}/pet/api/Respostas/array`,\n              { data: respostas },\n              this.state.Token\n            )\n              .then(resp => {\n                this.setState({ voltarEvento: true });\n                return Swal.fire({\n                  type: 'success',\n                  title: 'Inscrição realizada com sucesso',\n                  text:\n                    'Foi enviado uma confirmação de inscrição da atividade para seu e-mail'\n                });\n              })\n              .catch(err => {\n                return Swal.fire({\n                  type: 'error',\n                  title: 'Ops! algo deu errado',\n                  text: err.response.data.message\n                });\n              });\n          }\n        }\n      })\n      .catch(err => {\n        return Swal.fire({\n          type: 'error',\n          title: 'Ops! algo deu errado',\n          text: err.response.data.error.message\n        });\n      });\n  };\n\n  render() {\n    const {\n      usuario,\n      evento,\n      valoresEvento,\n      voltarDadosAdicionais,\n      voltarEvento\n    } = this.state;\n    const { idEvento } = this.props;\n    if (voltarDadosAdicionais) {\n      return <DadosAdicionais idEvento={idEvento} />;\n    }\n    if (voltarEvento) {\n      return <Redirect to={`/pet/eventos/${idEvento}`} />;\n    }\n    return (\n      <Fragment>\n        <Header />\n        <div className=\"container\">\n          <div className=\"card-panel z-depth-2\">\n            <div className=\"row\">\n              <div id=\"sobre\" className=\"col s12\" />\n              <h5>\n                <i className=\"material-icons left\">person</i>Suas informações\n              </h5>\n              <div className=\"basicInfo grey-text text-darken-2\">\n                <p>\n                  <b>Nome:</b>\n                  <span className=\"right\">{usuario.nome}</span>\n                </p>\n                <p>\n                  <b>CPF:</b>\n                  <span className=\"right\">{usuario.cpf}</span>\n                </p>\n                <p>\n                  <b>E-mail:</b>\n                  <span className=\"right\">{usuario.email}</span>\n                </p>\n              </div>\n              <h5>\n                <i className=\"material-icons left\">event</i>Informações do\n                evento\n              </h5>\n              <div className=\"basicInfo grey-text text-darken-2\">\n                <p>\n                  <b>Nome:</b>\n                  <span className=\"right\">{evento.nome}</span>\n                </p>\n                <p>\n                  <b>Data de ínicio:</b>\n                  <span className=\"right\">\n                    {formatDate(String(evento.dataInicio))}\n                  </span>\n                </p>\n                <p>\n                  <b>Data término:</b>\n                  <span className=\"right\">\n                    {formatDate(String(evento.dataFim))}\n                  </span>\n                </p>\n                {valoresEvento.map(valor => (\n                  <p>\n                    <b>{valor.nome}</b>\n                    <span className=\"right\">\n                      {this.formatValor(valor.preco)}\n                    </span>\n                  </p>\n                ))}\n              </div>\n              <div className=\"card-action\">\n                <div className=\"sweet-loading\">\n                  <button\n                    onClick={this.handleClick}\n                    className={this.getStyleButton()}\n                    style={{\n                      textOverflow: 'ellipsis',\n                      whiteSpace: 'nowrap',\n                      overflow: 'hidden',\n                      width: '150px'\n                    }}\n                  >\n                    {this.state.sendState ? (\n                      <ClipLoader\n                        css={override}\n                        sizeUnit={'px'}\n                        size={25}\n                        color={'white'}\n                        loading={this.state.sendState}\n                      />\n                    ) : (\n                      'Inscrever-me'\n                    )}\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"btn blue lighten-1 left\"\n                    onClick={this.handleClickVoltar}\n                  >\n                    {'Voltar'}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default confirmaçãoInscrito;\n"]},"metadata":{},"sourceType":"module"}