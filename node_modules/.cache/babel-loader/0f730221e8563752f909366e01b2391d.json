{"ast":null,"code":"var _jsxFileName = \"/home/arthur/UEM/DesenvolvimentoPET/pet-ui/src/Components/Usuario/Perfil/Cadastro.js\";\nimport React, { Component, Fragment } from 'react';\nimport Header from '../../Header/Header';\nimport { Redirect } from 'react-router-dom';\nimport { TextInput } from 'react-materialize';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport PathName from '../../pathConst.js';\n\nconst cpfMask = val => {\n  if (typeof val !== 'string') return '';\n  val = val.replace(/[^0-9]/g, '').substring(0, Math.min(11, val.length));\n  if (val.length <= 3) return val;\n  if (val.length <= 6) return \"\".concat(val.substring(0, 3), \".\").concat(val.substring(3, val.length));\n  if (val.length <= 9) return \"\".concat(val.substring(0, 3), \".\").concat(val.substring(3, 6), \".\").concat(val.substring(6, val.length));\n  return \"\".concat(val.substring(0, 3), \".\").concat(val.substring(3, 6), \".\").concat(val.substring(6, 9), \"-\").concat(val.substring(9, val.length));\n};\n\nclass Cadastro extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      nome: '',\n      email: '',\n      cpf: '',\n      password: '',\n      confirmPassword: '',\n      username: '',\n      redirect: false\n    };\n\n    this.handleChange = (e, mask) => {\n      if (typeof mask === 'function') this.setState({\n        [e.target.name]: mask(e.target.value)\n      });else if (e.target.name === 'username') this.setState({\n        [e.target.name]: e.target.value.toLowerCase()\n      });else if (e.target.name === 'nome') this.setState({\n        [e.target.name]: e.target.value.toUpperCase()\n      });else this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleSignUp = e => {\n      e.preventDefault();\n\n      if (this.state.password !== this.state.confirmPassword) {\n        this.setState({\n          confirmPassword: ''\n        });\n        return Swal.fire({\n          type: 'error',\n          title: 'Senha confirmada incorretamente',\n          text: 'Tente novamente'\n        });\n      } else if (this.state.password.length < 6) {\n        this.setState({\n          confirmPassword: ''\n        });\n        return Swal.fire({\n          type: 'error',\n          title: 'Senha confirmada incorretamente',\n          text: 'Tente novamente'\n        });\n      }\n\n      const _this$state = this.state,\n            nome = _this$state.nome,\n            email = _this$state.email,\n            cpf = _this$state.cpf,\n            password = _this$state.password,\n            username = _this$state.username;\n      axios.post(\"http://\".concat(PathName, \"/pet/api/Usuarios\"), {\n        nome,\n        email,\n        cpf,\n        password,\n        username,\n        realm: 'Normal'\n      }).then(res => {\n        if (res.status >= 200 && res.status < 300) {\n          Swal.fire({\n            type: 'success',\n            title: 'Cadastro realizado com sucesso',\n            showConfirmButton: false,\n            timer: 1500\n          }).then(() => {\n            this.setState({\n              redirect: true\n            });\n          });\n        }\n      }).catch(err => {\n        return Swal.fire({\n          type: 'error',\n          title: 'Ops! algo deu errado',\n          text: err.response.data.error.message\n        });\n      });\n    };\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return React.createElement(Redirect, {\n        to: \"/pet/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }), React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"z-depth-1 grey lighten-4 row\",\n      style: {\n        display: 'inlineBlock',\n        padding: 32 + 'px' + 48 + 'px' + 0 + 'px' + 48 + 'px',\n        border: 1 + 'px solid  #EEE'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"col s12\",\n      onSubmit: e => this.handleSignUp(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(TextInput, {\n      s: 12,\n      label: \"Nome completo\",\n      type: \"text\",\n      name: \"nome\",\n      value: this.state.nome,\n      required: true,\n      onChange: e => {\n        this.handleChange(e);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(TextInput, {\n      s: 12,\n      label: \"CPF\",\n      name: \"cpf\",\n      value: this.state.cpf,\n      required: true,\n      onChange: e => {\n        this.handleChange(e, cpfMask);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), React.createElement(TextInput, {\n      s: 12,\n      email: true,\n      validate: true,\n      label: \"Email\",\n      name: \"email\",\n      required: true,\n      value: this.state.email,\n      onChange: e => {\n        this.handleChange(e);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }), React.createElement(TextInput, {\n      s: 12,\n      label: \"Nome de usu\\xE1rio\",\n      type: \"text\",\n      name: \"username\",\n      required: true,\n      value: this.state.username,\n      onChange: e => {\n        this.handleChange(e);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(TextInput, {\n      s: 12,\n      password: true,\n      value: this.state.password,\n      name: \"password\",\n      required: true,\n      label: \"Senha\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(TextInput, {\n      s: 12,\n      password: true,\n      value: this.state.confirmPassword,\n      name: \"confirmPassword\",\n      required: true,\n      label: \"Confirme senha\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }), React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      name: \"btn_login\",\n      className: \"col s6 btn btn-large waves-effect indigo\",\n      style: {\n        float: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"Cadastrar\"))))))), React.createElement(\"div\", {\n      className: \"section\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Cadastro;","map":{"version":3,"sources":["/home/arthur/UEM/DesenvolvimentoPET/pet-ui/src/Components/Usuario/Perfil/Cadastro.js"],"names":["React","Component","Fragment","Header","Redirect","TextInput","axios","Swal","PathName","cpfMask","val","replace","substring","Math","min","length","Cadastro","state","nome","email","cpf","password","confirmPassword","username","redirect","handleChange","e","mask","setState","target","name","value","toLowerCase","toUpperCase","handleSignUp","preventDefault","fire","type","title","text","post","realm","then","res","status","showConfirmButton","timer","catch","err","response","data","error","message","render","display","padding","border","float"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport Header from '../../Header/Header';\nimport { Redirect } from 'react-router-dom';\nimport { TextInput } from 'react-materialize';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport PathName from '../../pathConst.js';\n\nconst cpfMask = val => {\n  if (typeof val !== 'string') return '';\n\n  val = val.replace(/[^0-9]/g, '').substring(0, Math.min(11, val.length));\n\n  if (val.length <= 3) return val;\n\n  if (val.length <= 6)\n    return `${val.substring(0, 3)}.${val.substring(3, val.length)}`;\n\n  if (val.length <= 9)\n    return `${val.substring(0, 3)}.${val.substring(3, 6)}.${val.substring(\n      6,\n      val.length\n    )}`;\n\n  return `${val.substring(0, 3)}.${val.substring(3, 6)}.${val.substring(\n    6,\n    9\n  )}-${val.substring(9, val.length)}`;\n};\n\nclass Cadastro extends Component {\n  state = {\n    nome: '',\n    email: '',\n    cpf: '',\n    password: '',\n    confirmPassword: '',\n    username: '',\n    redirect: false\n  };\n\n  handleChange = (e, mask) => {\n    if (typeof mask === 'function')\n      this.setState({ [e.target.name]: mask(e.target.value) });\n    else if (e.target.name === 'username')\n      this.setState({ [e.target.name]: e.target.value.toLowerCase() });\n    else if (e.target.name === 'nome')\n      this.setState({ [e.target.name]: e.target.value.toUpperCase() });\n    else this.setState({ [e.target.name]: e.target.value });\n  };\n\n  handleSignUp = e => {\n    e.preventDefault();\n    if (this.state.password !== this.state.confirmPassword) {\n      this.setState({ confirmPassword: '' });\n      return Swal.fire({\n        type: 'error',\n        title: 'Senha confirmada incorretamente',\n        text: 'Tente novamente'\n      });\n    } else if (this.state.password.length < 6) {\n      this.setState({ confirmPassword: '' });\n      return Swal.fire({\n        type: 'error',\n        title: 'Senha confirmada incorretamente',\n        text: 'Tente novamente'\n      });\n    }\n    const { nome, email, cpf, password, username } = this.state;\n    axios\n      .post(`http://${PathName}/pet/api/Usuarios`, {\n        nome,\n        email,\n        cpf,\n        password,\n        username,\n        realm: 'Normal'\n      })\n      .then(res => {\n        if (res.status >= 200 && res.status < 300) {\n          Swal.fire({\n            type: 'success',\n            title: 'Cadastro realizado com sucesso',\n            showConfirmButton: false,\n            timer: 1500\n          }).then(() => {\n            this.setState({ redirect: true });\n          });\n        }\n      })\n      .catch(err => {\n        return Swal.fire({\n          type: 'error',\n          title: 'Ops! algo deu errado',\n          text: err.response.data.error.message\n        });\n      });\n  };\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to=\"/pet/login\" />;\n    }\n    return (\n      <Fragment>\n        <Header />\n        <div className=\"section\" />\n        <center>\n          <div className=\"container\">\n            <div\n              className=\"z-depth-1 grey lighten-4 row\"\n              style={{\n                display: 'inlineBlock',\n                padding: 32 + 'px' + 48 + 'px' + 0 + 'px' + 48 + 'px',\n                border: 1 + 'px solid  #EEE'\n              }}\n            >\n              <form className=\"col s12\" onSubmit={e => this.handleSignUp(e)}>\n                <div className=\"container\">\n                  <div className=\"row\">\n                    <TextInput\n                      s={12}\n                      label=\"Nome completo\"\n                      type=\"text\"\n                      name=\"nome\"\n                      value={this.state.nome}\n                      required\n                      onChange={e => {\n                        this.handleChange(e);\n                      }}\n                    />\n\n                    <TextInput\n                      s={12}\n                      label=\"CPF\"\n                      name=\"cpf\"\n                      value={this.state.cpf}\n                      required\n                      onChange={e => {\n                        this.handleChange(e, cpfMask);\n                      }}\n                    />\n                    <TextInput\n                      s={12}\n                      email\n                      validate\n                      label=\"Email\"\n                      name=\"email\"\n                      required\n                      value={this.state.email}\n                      onChange={e => {\n                        this.handleChange(e);\n                      }}\n                    />\n\n                    <TextInput\n                      s={12}\n                      label=\"Nome de usuário\"\n                      type=\"text\"\n                      name=\"username\"\n                      required\n                      value={this.state.username}\n                      onChange={e => {\n                        this.handleChange(e);\n                      }}\n                    />\n\n                    <TextInput\n                      s={12}\n                      password\n                      value={this.state.password}\n                      name=\"password\"\n                      required\n                      label=\"Senha\"\n                      onChange={this.handleChange}\n                    />\n                    <TextInput\n                      s={12}\n                      password\n                      value={this.state.confirmPassword}\n                      name=\"confirmPassword\"\n                      required\n                      label=\"Confirme senha\"\n                      onChange={this.handleChange}\n                    />\n                  </div>\n                </div>\n                <br />\n                <center>\n                  <div className=\"row\">\n                    <button\n                      type=\"submit\"\n                      name=\"btn_login\"\n                      className=\"col s6 btn btn-large waves-effect indigo\"\n                      style={{ float: 'none' }}\n                    >\n                      Cadastrar\n                    </button>\n                  </div>\n                </center>\n              </form>\n            </div>\n          </div>\n        </center>\n        <div className=\"section\" />\n      </Fragment>\n    );\n  }\n}\n\nexport default Cadastro;\n"]},"metadata":{},"sourceType":"module"}