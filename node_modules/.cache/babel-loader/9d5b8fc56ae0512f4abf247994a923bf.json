{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/arthur/UEM/DesenvolvimentoPET/pet-ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/arthur/UEM/DesenvolvimentoPET/pet-ui/src/Components/Eventos/turmaItemWithCard.js\";\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  display: block;\\n  margin: 0 auto;\\n  border-color: white;\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component, Fragment } from \"react\";\nimport Axios from \"axios\";\nimport PathName from \"../pathConst\";\nimport formatDate from \"./formatDate\";\nimport moment from \"moment\"; // eslint-disable-next-line no-unused-vars\n\nimport tz from \"moment-timezone\";\nimport Swal from \"sweetalert2\";\nimport { css } from \"@emotion/core\";\nimport ClipLoader from \"react-spinners/ClipLoader\";\nimport { Row, Col } from \"react-materialize\";\nimport \"./centerIfSmall.css\";\nconst override = css(_templateObject());\n\nclass turmaItem extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      dias: [],\n      inscritoId: null,\n      userLogged: false,\n      Token: {},\n      userId: \"\",\n      sendState: false\n    };\n\n    this.handleClick = () => {\n      this.setState({\n        sendState: true\n      });\n\n      if (this.state.inscritoId === null) {\n        this.setState({\n          sendState: false\n        });\n        return Swal.fire({\n          type: \"error\",\n          title: \"Ops! algo deu errado\",\n          text: \"Você precisa estar inscrito no evento para conseguir inscrever-se em uma atividade.\"\n        });\n      } else {\n        const newInscricao = {\n          pago: false,\n          cargaHoraria: 0,\n          atividadeId: this.props.turma.atividadeId,\n          inscritoId: this.state.inscritoId,\n          turmaId: this.props.turma.id,\n          usuarioId: this.state.userId\n        };\n        Axios.post(\"https://\".concat(PathName, \"/pet/api/Inscricoes\"), newInscricao, this.state.Token).then(async res => {\n          this.setState({\n            sendState: false,\n            success: true\n          });\n          const status = await res.status;\n\n          if (status >= 200 && status < 300) {\n            return Swal.fire({\n              type: \"success\",\n              title: \"Inscrição realizada com sucesso\",\n              text: \"Foi enviado uma confirmação de inscrição da atividade para seu e-mail\"\n            });\n          }\n        }).catch(err => {\n          this.setState({\n            sendState: false\n          });\n          return Swal.fire({\n            type: \"error\",\n            title: \"Ops! algo deu errado\",\n            text: err.response.data.error.message\n          });\n        });\n      }\n    };\n\n    this.getStyleButton = () => {\n      const success = this.state.success;\n      return !success ? \"btn blue lighten-1 right\" : \"btn green right\";\n    };\n\n    this.getTextButton = () => {\n      const userLogged = this.state.userLogged;\n      return userLogged ? \"Inscrever-se\" : \"Efetue login p/ inscrever-se\";\n    };\n\n    this.getTime = time => {\n      return time.substring(11, 16);\n    };\n\n    this.buildRow = (icon, key, value) => React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(Col, {\n      s: 12,\n      m: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"material-icons left hide-on-small-and-down\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, icon), React.createElement(\"b\", {\n      className: \"left hide-on-small-and-down\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, key), React.createElement(\"b\", {\n      className: \"really-center-span hide-on-med-and-up\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, key)), React.createElement(Col, {\n      s: 12,\n      m: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"right hide-on-small-and-down\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, value), React.createElement(\"span\", {\n      className: \"really-center-span hide-on-med-and-up\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, value)));\n  }\n\n  componentWillMount() {\n    const _this$props = this.props,\n          turma = _this$props.turma,\n          eventoId = _this$props.eventoId;\n    const userId = localStorage.getItem(\"user_id\");\n    const token = localStorage.getItem(\"access_token\");\n    const Token = {\n      headers: {\n        Authorization: token\n      }\n    };\n    this.setState({\n      Token: Token,\n      userId: userId\n    });\n    const userFilter = {\n      where: {\n        usuarioId: userId,\n        eventoId\n      }\n    };\n    const filterDias = {\n      order: \"dia ASC\"\n    };\n    Axios.get(\"https://\".concat(PathName, \"/pet/api/Turmas/\").concat(turma.id, \"/dias?filter=\").concat(JSON.stringify(filterDias))).then(res => {\n      this.setState({\n        dias: res.data\n      });\n      console.log(res.data);\n    });\n    Axios.get(\"https://\".concat(PathName, \"/pet/api/Inscritos?filter=\").concat(JSON.stringify(userFilter)), Token).then(res => {\n      if (res.data.length !== 0) {\n        this.setState({\n          inscritoId: res.data[0].id\n        });\n      }\n    });\n\n    if (userId === null) {\n      this.setState({\n        userLogged: false\n      });\n    } else {\n      this.setState({\n        userLogged: true\n      });\n    }\n  }\n\n  render() {\n    const turma = this.props.turma;\n    const dias = this.state.dias;\n    return React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col s12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, this.buildRow(\"map\", \"Local:\", turma.nome), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }), turma && turma.limited ? React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, this.buildRow(\"group\", \"Vagas restantes:\", \"\".concat(turma.quantidadeMaxInscritos - turma.quantidadeAtualInscritos)), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    })) : React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, this.buildRow(\"group\", \"Vagas restantes:\", \"Ilimitadas\"), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    })), dias.length <= 1 ? dias.map(dia => React.createElement(Fragment, {\n      key: dia.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, this.buildRow(\"event\", \"Data:\", formatDate(moment.tz(dia.dia, \"America/Sao_Paulo\").format())), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }), this.buildRow(\"access_time\", \"Horário:\", this.getTime(moment.tz(dia.dia, \"America/Sao_Paulo\").format())))) : dias.map((dia, i) => React.createElement(Fragment, {\n      key: dia.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"Informa\\xE7\\xF5es do \".concat(i + 1, \"\\xBA dia\")), \" \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }), this.buildRow(\"event\", \"Data:\", formatDate(moment.tz(dia.dia, \"America/Sao_Paulo\").format())), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }), this.buildRow(\"access_time\", \"Horário:\", this.getTime(moment.tz(dia.dia, \"America/Sao_Paulo\").format())), i < dias.length - 1 ? React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }) : null)), React.createElement(\"div\", {\n      className: \"card-action\",\n      style: {\n        padding: \"2rem\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sweet-loading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.handleClick,\n      className: this.getStyleButton(),\n      style: {\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        width: \"150px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, this.state.sendState ? React.createElement(ClipLoader, {\n      css: override,\n      sizeUnit: \"px\",\n      size: 25,\n      color: \"white\",\n      loading: this.state.sendState,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }) : \"Inscrever-me\")))))));\n  }\n\n}\n\nexport default turmaItem;","map":{"version":3,"sources":["/home/arthur/UEM/DesenvolvimentoPET/pet-ui/src/Components/Eventos/turmaItemWithCard.js"],"names":["React","Component","Fragment","Axios","PathName","formatDate","moment","tz","Swal","css","ClipLoader","Row","Col","override","turmaItem","state","dias","inscritoId","userLogged","Token","userId","sendState","handleClick","setState","fire","type","title","text","newInscricao","pago","cargaHoraria","atividadeId","props","turma","turmaId","id","usuarioId","post","then","res","success","status","catch","err","response","data","error","message","getStyleButton","getTextButton","getTime","time","substring","buildRow","icon","key","value","componentWillMount","eventoId","localStorage","getItem","token","headers","Authorization","userFilter","where","filterDias","order","get","JSON","stringify","console","log","length","render","nome","limited","quantidadeMaxInscritos","quantidadeAtualInscritos","map","dia","format","i","padding","textOverflow","whiteSpace","overflow","width"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport Axios from \"axios\";\nimport PathName from \"../pathConst\";\nimport formatDate from \"./formatDate\";\nimport moment from \"moment\";\n// eslint-disable-next-line no-unused-vars\nimport tz from \"moment-timezone\";\nimport Swal from \"sweetalert2\";\nimport { css } from \"@emotion/core\";\nimport ClipLoader from \"react-spinners/ClipLoader\";\nimport { Row, Col } from \"react-materialize\";\nimport \"./centerIfSmall.css\";\n\nconst override = css`\n  display: block;\n  margin: 0 auto;\n  border-color: white;\n`;\nclass turmaItem extends Component {\n  componentWillMount() {\n    const { turma, eventoId } = this.props;\n    const userId = localStorage.getItem(\"user_id\");\n    const token = localStorage.getItem(\"access_token\");\n    const Token = {\n      headers: {\n        Authorization: token\n      }\n    };\n\n    this.setState({ Token: Token, userId: userId });\n    const userFilter = {\n      where: {\n        usuarioId: userId,\n        eventoId\n      }\n    };\n    const filterDias = {\n      order: \"dia ASC\"\n    };\n    Axios.get(\n      `https://${PathName}/pet/api/Turmas/${\n        turma.id\n      }/dias?filter=${JSON.stringify(filterDias)}`\n    ).then(res => {\n      this.setState({ dias: res.data });\n      console.log(res.data);\n    });\n\n    Axios.get(\n      `https://${PathName}/pet/api/Inscritos?filter=${JSON.stringify(\n        userFilter\n      )}`,\n      Token\n    ).then(res => {\n      if (res.data.length !== 0) {\n        this.setState({ inscritoId: res.data[0].id });\n      }\n    });\n    if (userId === null) {\n      this.setState({ userLogged: false });\n    } else {\n      this.setState({ userLogged: true });\n    }\n  }\n\n  state = {\n    dias: [],\n    inscritoId: null,\n    userLogged: false,\n    Token: {},\n\n    userId: \"\",\n    sendState: false\n  };\n  handleClick = () => {\n    this.setState({ sendState: true });\n    if (this.state.inscritoId === null) {\n      this.setState({ sendState: false });\n      return Swal.fire({\n        type: \"error\",\n        title: \"Ops! algo deu errado\",\n        text:\n          \"Você precisa estar inscrito no evento para conseguir inscrever-se em uma atividade.\"\n      });\n    } else {\n      const newInscricao = {\n        pago: false,\n        cargaHoraria: 0,\n        atividadeId: this.props.turma.atividadeId,\n        inscritoId: this.state.inscritoId,\n        turmaId: this.props.turma.id,\n        usuarioId: this.state.userId\n      };\n      Axios.post(\n        `https://${PathName}/pet/api/Inscricoes`,\n        newInscricao,\n        this.state.Token\n      )\n        .then(async res => {\n          this.setState({ sendState: false, success: true });\n          const status = await res.status;\n          if (status >= 200 && status < 300) {\n            return Swal.fire({\n              type: \"success\",\n              title: \"Inscrição realizada com sucesso\",\n              text:\n                \"Foi enviado uma confirmação de inscrição da atividade para seu e-mail\"\n            });\n          }\n        })\n        .catch(err => {\n          this.setState({ sendState: false });\n          return Swal.fire({\n            type: \"error\",\n            title: \"Ops! algo deu errado\",\n            text: err.response.data.error.message\n          });\n        });\n    }\n  };\n\n  getStyleButton = () => {\n    const { success } = this.state;\n    return !success ? \"btn blue lighten-1 right\" : \"btn green right\";\n  };\n\n  getTextButton = () => {\n    const { userLogged } = this.state;\n    return userLogged ? \"Inscrever-se\" : \"Efetue login p/ inscrever-se\";\n  };\n\n  getTime = time => {\n    return time.substring(11, 16);\n  };\n\n  buildRow = (icon, key, value) => (\n    <Row>\n      <Col s={12} m={6}>\n        <i className=\"material-icons left hide-on-small-and-down\">{icon}</i>\n        <b className=\"left hide-on-small-and-down\">{key}</b>\n        <b className=\"really-center-span hide-on-med-and-up\">{key}</b>\n      </Col>\n\n      <Col s={12} m={6}>\n        <span className=\"right hide-on-small-and-down\">{value}</span>\n        <span className=\"really-center-span hide-on-med-and-up\">{value}</span>\n      </Col>\n    </Row>\n  );\n  render() {\n    const { turma } = this.props;\n    const { dias } = this.state;\n    return (\n      <div className=\"row\">\n        <div className=\"col s12 \">\n          <div className=\"card\">\n            <div className=\"card-content\">\n              {this.buildRow(\"map\", \"Local:\", turma.nome)}\n              <hr className=\"style-six\" />\n              {turma && turma.limited ? (\n                <Fragment>\n                  {this.buildRow(\n                    \"group\",\n                    \"Vagas restantes:\",\n                    `${turma.quantidadeMaxInscritos -\n                      turma.quantidadeAtualInscritos}`\n                  )}\n                  <hr className=\"style-six\" />\n                </Fragment>\n              ) : (\n                <Fragment>\n                  {this.buildRow(\"group\", \"Vagas restantes:\", \"Ilimitadas\")}\n                  <hr className=\"style-six\" />\n                </Fragment>\n              )}\n              {dias.length <= 1\n                ? dias.map(dia => (\n                    <Fragment key={dia.id}>\n                      {this.buildRow(\n                        \"event\",\n                        \"Data:\",\n                        formatDate(\n                          moment.tz(dia.dia, \"America/Sao_Paulo\").format()\n                        )\n                      )}\n                      <hr className=\"style-six\" />\n                      {this.buildRow(\n                        \"access_time\",\n                        \"Horário:\",\n                        this.getTime(\n                          moment.tz(dia.dia, \"America/Sao_Paulo\").format()\n                        )\n                      )}\n                    </Fragment>\n                  ))\n                : dias.map((dia, i) => (\n                    <Fragment key={dia.id}>\n                      <h6>\n                        <b>{`Informações do ${i + 1}º dia`}</b>{\" \"}\n                      </h6>\n                      <br />\n                      {this.buildRow(\n                        \"event\",\n                        \"Data:\",\n                        formatDate(\n                          moment.tz(dia.dia, \"America/Sao_Paulo\").format()\n                        )\n                      )}\n                      <hr className=\"style-six\" />\n                      {this.buildRow(\n                        \"access_time\",\n                        \"Horário:\",\n                        this.getTime(\n                          moment.tz(dia.dia, \"America/Sao_Paulo\").format()\n                        )\n                      )}\n\n                      {i < dias.length - 1 ? (\n                        <hr className=\"style-six\" />\n                      ) : null}\n                    </Fragment>\n                  ))}\n              <div className=\"card-action\" style={{ padding: \"2rem\" }}>\n                <div className=\"sweet-loading\">\n                  <button\n                    onClick={this.handleClick}\n                    className={this.getStyleButton()}\n                    style={{\n                      textOverflow: \"ellipsis\",\n                      whiteSpace: \"nowrap\",\n                      overflow: \"hidden\",\n                      width: \"150px\"\n                    }}\n                  >\n                    {this.state.sendState ? (\n                      <ClipLoader\n                        css={override}\n                        sizeUnit={\"px\"}\n                        size={25}\n                        color={\"white\"}\n                        loading={this.state.sendState}\n                      />\n                    ) : (\n                      \"Inscrever-me\"\n                    )}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default turmaItem;\n"]},"metadata":{},"sourceType":"module"}