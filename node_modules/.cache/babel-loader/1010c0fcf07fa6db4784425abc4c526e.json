{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/arthur/UEM/DesenvolvimentoPET/pet-ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/arthur/UEM/DesenvolvimentoPET/pet-ui/src/Components/Eventos/turmaItemWithCard.js\";\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  display: block;\\n  margin: 0 auto;\\n  border-color: red;\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component, Fragment } from 'react';\nimport Axios from 'axios';\nimport PathName from '../pathConst';\nimport formatDate from './formatDate';\nimport Swal from 'sweetalert2';\nimport { css } from '@emotion/core'; // import { Rabbit as Button } from 'react-button-loaders';\n\nimport ClipLoader from 'react-spinners/ClipLoader';\nconst override = css(_templateObject());\n\nclass turmaItem extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      dias: [],\n      inscritoId: null,\n      userLogged: false,\n      Token: {},\n      userId: '',\n      sendState: false\n    };\n\n    this.handleClick = () => {\n      this.setState({\n        sendState: 'loading'\n      });\n\n      if (this.state.inscritoId === null) {\n        this.setState({\n          sendState: ''\n        });\n        return Swal.fire({\n          type: 'error',\n          title: 'Ops! algo deu errado',\n          text: 'Você precisa estar inscrito no evento para conseguir inscrever-se em uma atividade.'\n        });\n      } else {\n        const newInscricao = {\n          pago: false,\n          cargaHoraria: 0,\n          atividadeId: this.props.turma.atividadeId,\n          inscritoId: this.state.inscritoId,\n          turmaId: this.props.turma.id,\n          usuarioId: this.state.userId\n        };\n        Axios.post(\"http://\".concat(PathName, \"/pet/api/Inscricoes\"), newInscricao, this.state.Token).then(async res => {\n          this.setState({\n            sendState: 'finished'\n          });\n          const status = await res.status;\n\n          if (status >= 200 && status < 300) {\n            return Swal.fire({\n              type: 'success',\n              title: 'Inscrição realizada com sucesso',\n              text: 'Foi enviado uma confirmação de inscrição da atividade para seu e-mail'\n            });\n          }\n        }).catch(err => {\n          this.setState({\n            sendState: ''\n          });\n          return Swal.fire({\n            type: 'error',\n            title: 'Ops! algo deu errado',\n            text: err.response.data.error.message\n          });\n        });\n      }\n    };\n\n    this.getStyleButton = () => {\n      const userLogged = this.state.userLogged;\n      return userLogged ? 'btn blue lighten-1 right' : 'disabled btn blue lighten-1 right';\n    };\n\n    this.getTextButton = () => {\n      const userLogged = this.state.userLogged;\n      return userLogged ? 'Inscrever-se' : 'Efetue login p/ inscrever-se';\n    };\n\n    this.getTime = time => {\n      return time.substring(11, 16);\n    };\n  }\n\n  componentWillMount() {\n    const _this$props = this.props,\n          turma = _this$props.turma,\n          eventoId = _this$props.eventoId;\n    const userId = localStorage.getItem('user_id');\n    const token = localStorage.getItem('access_token');\n    const Token = {\n      headers: {\n        Authorization: token\n      }\n    };\n    this.setState({\n      Token: Token,\n      userId: userId\n    });\n    const userFilter = {\n      where: {\n        usuarioId: userId,\n        eventoId\n      }\n    };\n    Axios.get(\"http://\".concat(PathName, \"/pet/api/Turmas/\").concat(turma.id, \"/dias\")).then(res => {\n      this.setState({\n        dias: res.data\n      });\n    });\n    Axios.get(\"http://\".concat(PathName, \"/pet/api/Inscritos?filter=\").concat(JSON.stringify(userFilter)), Token).then(res => {\n      if (res.data.length !== 0) {\n        this.setState({\n          inscritoId: res.data[0].id\n        });\n      }\n    });\n\n    if (userId === null) {\n      this.setState({\n        userLogged: false\n      });\n    } else {\n      this.setState({\n        userLogged: true\n      });\n    }\n  }\n\n  render() {\n    const turma = this.props.turma;\n    const dias = this.state.dias;\n    return React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col s12 \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Local:\"), React.createElement(\"i\", {\n      className: \"material-icons left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"map\"), React.createElement(\"span\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, turma.nome)), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), turma && turma.limited ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Vagas:\"), React.createElement(\"i\", {\n      className: \"material-icons left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"group\"), React.createElement(\"span\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"\".concat(turma.quantidadeAtualInscritos, \" / \").concat(turma.quantidadeMaxInscritos))), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    })) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"Vagas:\"), React.createElement(\"i\", {\n      className: \"material-icons left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"group\"), React.createElement(\"span\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Sem limites\")), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    })), dias.length <= 1 ? dias.map((dia, i) => React.createElement(Fragment, {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \"Data:\"), React.createElement(\"i\", {\n      className: \"material-icons left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"event\"), React.createElement(\"span\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, formatDate(dia.dia))), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }), React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \"Hor\\xE1rio:\"), React.createElement(\"i\", {\n      className: \"material-icons left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"access_time\"), React.createElement(\"span\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, this.getTime(dia.dia)), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }))) : dias.map((dia, i) => React.createElement(Fragment, {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, \"Informa\\xE7\\xF5es do \".concat(i + 1, \"\\xBA dia\"))), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, \"Data:\"), React.createElement(\"i\", {\n      className: \"material-icons left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, \"event\"), React.createElement(\"span\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, formatDate(dia.dia))), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }), React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"Hor\\xE1rio:\"), React.createElement(\"i\", {\n      className: \"material-icons left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"access_time\"), React.createElement(\"span\", {\n      className: \"right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, this.getTime(dia.dia)), i < dias.length - 1 && React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"card-action\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sweet-loading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.handleClick,\n      className: this.getStyleButton(),\n      style: {\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        width: '150px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(ClipLoader, {\n      css: override,\n      sizeUnit: 'px',\n      size: 25,\n      color: 'red',\n      loading: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }))))))));\n  }\n\n}\n\nexport default turmaItem;","map":{"version":3,"sources":["/home/arthur/UEM/DesenvolvimentoPET/pet-ui/src/Components/Eventos/turmaItemWithCard.js"],"names":["React","Component","Fragment","Axios","PathName","formatDate","Swal","css","ClipLoader","override","turmaItem","state","dias","inscritoId","userLogged","Token","userId","sendState","handleClick","setState","fire","type","title","text","newInscricao","pago","cargaHoraria","atividadeId","props","turma","turmaId","id","usuarioId","post","then","res","status","catch","err","response","data","error","message","getStyleButton","getTextButton","getTime","time","substring","componentWillMount","eventoId","localStorage","getItem","token","headers","Authorization","userFilter","where","get","JSON","stringify","length","render","nome","limited","quantidadeAtualInscritos","quantidadeMaxInscritos","map","dia","i","textOverflow","whiteSpace","overflow","width"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport Axios from 'axios';\nimport PathName from '../pathConst';\nimport formatDate from './formatDate';\nimport Swal from 'sweetalert2';\nimport { css } from '@emotion/core';\n// import { Rabbit as Button } from 'react-button-loaders';\nimport ClipLoader from 'react-spinners/ClipLoader';\nconst override = css`\n  display: block;\n  margin: 0 auto;\n  border-color: red;\n`;\nclass turmaItem extends Component {\n  componentWillMount() {\n    const { turma, eventoId } = this.props;\n    const userId = localStorage.getItem('user_id');\n    const token = localStorage.getItem('access_token');\n    const Token = {\n      headers: {\n        Authorization: token\n      }\n    };\n\n    this.setState({ Token: Token, userId: userId });\n    const userFilter = {\n      where: {\n        usuarioId: userId,\n        eventoId\n      }\n    };\n    Axios.get(`http://${PathName}/pet/api/Turmas/${turma.id}/dias`).then(\n      res => {\n        this.setState({ dias: res.data });\n      }\n    );\n\n    Axios.get(\n      `http://${PathName}/pet/api/Inscritos?filter=${JSON.stringify(\n        userFilter\n      )}`,\n      Token\n    ).then(res => {\n      if (res.data.length !== 0) {\n        this.setState({ inscritoId: res.data[0].id });\n      }\n    });\n    if (userId === null) {\n      this.setState({ userLogged: false });\n    } else {\n      this.setState({ userLogged: true });\n    }\n  }\n\n  state = {\n    dias: [],\n    inscritoId: null,\n    userLogged: false,\n    Token: {},\n    userId: '',\n    sendState: false\n  };\n\n  handleClick = () => {\n    this.setState({ sendState: 'loading' });\n    if (this.state.inscritoId === null) {\n      this.setState({ sendState: '' });\n      return Swal.fire({\n        type: 'error',\n        title: 'Ops! algo deu errado',\n        text:\n          'Você precisa estar inscrito no evento para conseguir inscrever-se em uma atividade.'\n      });\n    } else {\n      const newInscricao = {\n        pago: false,\n        cargaHoraria: 0,\n        atividadeId: this.props.turma.atividadeId,\n        inscritoId: this.state.inscritoId,\n        turmaId: this.props.turma.id,\n        usuarioId: this.state.userId\n      };\n      Axios.post(\n        `http://${PathName}/pet/api/Inscricoes`,\n        newInscricao,\n        this.state.Token\n      )\n        .then(async res => {\n          this.setState({ sendState: 'finished' });\n          const status = await res.status;\n          if (status >= 200 && status < 300) {\n            return Swal.fire({\n              type: 'success',\n              title: 'Inscrição realizada com sucesso',\n              text:\n                'Foi enviado uma confirmação de inscrição da atividade para seu e-mail'\n            });\n          }\n        })\n        .catch(err => {\n          this.setState({ sendState: '' });\n          return Swal.fire({\n            type: 'error',\n            title: 'Ops! algo deu errado',\n            text: err.response.data.error.message\n          });\n        });\n    }\n  };\n\n  getStyleButton = () => {\n    const { userLogged } = this.state;\n    return userLogged\n      ? 'btn blue lighten-1 right'\n      : 'disabled btn blue lighten-1 right';\n  };\n\n  getTextButton = () => {\n    const { userLogged } = this.state;\n    return userLogged ? 'Inscrever-se' : 'Efetue login p/ inscrever-se';\n  };\n\n  getTime = time => {\n    return time.substring(11, 16);\n  };\n\n  render() {\n    const { turma } = this.props;\n    const { dias } = this.state;\n    return (\n      <div className=\"row\">\n        <div className=\"col s12 \">\n          <div className=\"card\">\n            <div className=\"card-content\">\n              <p>\n                <b>Local:</b>\n                <i className=\"material-icons left\">map</i>\n                <span className=\"right\">{turma.nome}</span>\n              </p>\n              <hr className=\"style-six\" />\n              {turma && turma.limited ? (\n                <div>\n                  <p>\n                    <b>Vagas:</b>\n                    <i className=\"material-icons left\">group</i>\n                    <span className=\"right\">{`${turma.quantidadeAtualInscritos} / ${turma.quantidadeMaxInscritos}`}</span>\n                  </p>\n                  <hr className=\"style-six\" />\n                </div>\n              ) : (\n                <div>\n                  <p>\n                    <b>Vagas:</b>\n                    <i className=\"material-icons left\">group</i>\n                    <span className=\"right\">{`Sem limites`}</span>\n                  </p>\n                  <hr className=\"style-six\" />\n                </div>\n              )}\n              {dias.length <= 1\n                ? dias.map((dia, i) => (\n                    <Fragment key={i}>\n                      <p>\n                        <b>Data:</b>\n                        <i className=\"material-icons left\">event</i>\n                        <span className=\"right\">{formatDate(dia.dia)}</span>\n                      </p>\n                      <hr className=\"style-six\" />\n                      <b>Horário:</b>\n                      <i className=\"material-icons left\">access_time</i>\n                      <span className=\"right\">{this.getTime(dia.dia)}</span>\n                      <hr className=\"style-six\" />\n                    </Fragment>\n                  ))\n                : dias.map((dia, i) => (\n                    <Fragment key={i}>\n                      <p>\n                        <b>{`Informações do ${i + 1}º dia`}</b>\n                      </p>\n                      <hr className=\"style-six\" />\n                      <p>\n                        <b>Data:</b>\n                        <i className=\"material-icons left\">event</i>\n                        <span className=\"right\">{formatDate(dia.dia)}</span>\n                      </p>\n                      <hr className=\"style-six\" />\n                      <b>Horário:</b>\n                      <i className=\"material-icons left\">access_time</i>\n                      <span className=\"right\">{this.getTime(dia.dia)}</span>\n                      {i < dias.length - 1 && <hr className=\"style-six\" />}\n                    </Fragment>\n                  ))}\n              <div className=\"card-action\">\n                <div className=\"sweet-loading\">\n                  <button\n                    onClick={this.handleClick}\n                    className={this.getStyleButton()}\n                    style={{\n                      textOverflow: 'ellipsis',\n                      whiteSpace: 'nowrap',\n                      overflow: 'hidden',\n                      width: '150px'\n                    }}\n                  >\n                    <ClipLoader\n                      css={override}\n                      sizeUnit={'px'}\n                      size={25}\n                      color={'red'}\n                      loading={true}\n                    />\n                  </button>\n                </div>\n                {/* <Button\n                  onClick={this.handleClick}\n                  className={this.getStyleButton()}\n                  style={{\n                    textOverflow: 'ellipsis',\n                    whiteSpace: 'nowrap',\n                    overflow: 'hidden',\n                    position: 'relative'\n                  }}\n                  state={this.state.sendState}\n                >\n                  Send\n                </Button> */}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default turmaItem;\n"]},"metadata":{},"sourceType":"module"}