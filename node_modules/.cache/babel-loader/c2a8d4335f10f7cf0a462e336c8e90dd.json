{"ast":null,"code":"var _jsxFileName = \"/home/arthur/UEM/DesenvolvimentoPET/pet-ui/src/Components/Login/Login.js\";\nimport React, { Component, Fragment } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport Header from '../Header/Header';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport { TextInput } from 'react-materialize';\nimport PathName from '../pathConst.js';\nimport expression from './regex';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.verifyEmail = email => {\n      return expression.test(String(email).toLowerCase());\n    };\n\n    this.handleSignIn = async e => {\n      e.preventDefault();\n      const _this$state = this.state,\n            name = _this$state.name,\n            password = _this$state.password;\n      const newLogin = {};\n\n      if (this.verifyEmail(name)) {\n        newLogin.email = name.toLowerCase();\n        newLogin.password = password;\n      } else {\n        newLogin.username = name.toLowerCase();\n        newLogin.password = password;\n      }\n\n      axios.post(\"http://\".concat(PathName, \"/pet/api/Usuarios/login\"), newLogin).then(async res => {\n        localStorage.setItem('user_id', res.data.userId);\n        localStorage.setItem('access_token', res.data.id);\n        const petiano = await this.verifyPetiano();\n\n        if (petiano) {\n          localStorage.setItem('petiano', res.data.id);\n        }\n\n        this.setState({\n          redirect: true\n        });\n      }).catch(err => {\n        return Swal.fire({\n          type: 'error',\n          title: 'Ops! algo deu errado',\n          text: err.response.data.error.message\n        });\n      });\n    };\n\n    this.state = {\n      name: '',\n      password: '',\n      redirect: false\n    };\n  }\n\n  async verifyPetiano() {\n    let id = localStorage.getItem('user_id');\n    let res = await axios.get(\"http://\".concat(PathName, \"/pet/api/Usuarios/petiano/\").concat(id));\n    return res.data;\n  }\n\n  render() {\n    const styleLinks = {\n      margin: '2em'\n    };\n\n    if (this.state.redirect) {\n      return React.createElement(Redirect, {\n        to: \"/pet\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"z-depth-1 grey lighten-4 row\",\n      style: {\n        display: 'inlineBlock',\n        padding: 32 + 'px' + 48 + 'px' + 0 + 'px' + 48 + 'px',\n        border: 1 + 'px solid  #EEE'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"indigo-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"form\", {\n      className: \"col s12\",\n      method: \"post\",\n      onSubmit: this.handleSignIn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(TextInput, {\n      s: 12,\n      icon: \"account_box\",\n      label: \"Nome de usu\\xE1rio ou E-mail\",\n      name: \"name\",\n      success: \"\",\n      required: true,\n      value: this.state.name,\n      onChange: e => {\n        this.handleChange(e);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(TextInput, {\n      s: 12,\n      password: true,\n      validate: true,\n      icon: \"lock\",\n      label: \"Senha\",\n      name: \"password\",\n      error: \"Insira uma senha\",\n      success: \"\",\n      required: true,\n      onChange: e => {\n        this.handleChange(e);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      name: \"btn_login\",\n      className: \"col s6 btn btn-large waves-effect indigo\",\n      style: {\n        float: 'none',\n        marginBottom: '1em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Entrar\")))))), React.createElement(\"div\", {\n      className: \"container\",\n      style: styleLinks,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/pet/esqueceuSenha\",\n      className: \"pink-text left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Esqueceu sua senha?\")), React.createElement(Link, {\n      to: \"/pet/cadastro\",\n      className: \"blue-text right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Criar uma conta\")))))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/arthur/UEM/DesenvolvimentoPET/pet-ui/src/Components/Login/Login.js"],"names":["React","Component","Fragment","Link","Redirect","Header","axios","Swal","TextInput","PathName","expression","Login","constructor","props","handleChange","e","setState","target","name","value","verifyEmail","email","test","String","toLowerCase","handleSignIn","preventDefault","state","password","newLogin","username","post","then","res","localStorage","setItem","data","userId","id","petiano","verifyPetiano","redirect","catch","err","fire","type","title","text","response","error","message","getItem","get","render","styleLinks","margin","display","padding","border","float","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport Header from '../Header/Header';\nimport axios from 'axios';\nimport Swal from 'sweetalert2';\nimport { TextInput } from 'react-materialize';\nimport PathName from '../pathConst.js';\nimport expression from './regex';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: '',\n      password: '',\n      redirect: false\n    };\n  }\n\n  handleChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  async verifyPetiano() {\n    let id = localStorage.getItem('user_id');\n    let res = await axios.get(\n      `http://${PathName}/pet/api/Usuarios/petiano/${id}`\n    );\n    return res.data;\n  }\n\n  verifyEmail = email => {\n    return expression.test(String(email).toLowerCase());\n  };\n\n  handleSignIn = async e => {\n    e.preventDefault();\n    const { name, password } = this.state;\n    const newLogin = {};\n    if (this.verifyEmail(name)) {\n      newLogin.email = name.toLowerCase();\n      newLogin.password = password;\n    } else {\n      newLogin.username = name.toLowerCase();\n      newLogin.password = password;\n    }\n    axios\n      .post(`http://${PathName}/pet/api/Usuarios/login`, newLogin)\n      .then(async res => {\n        localStorage.setItem('user_id', res.data.userId);\n        localStorage.setItem('access_token', res.data.id);\n        const petiano = await this.verifyPetiano();\n        if (petiano) {\n          localStorage.setItem('petiano', res.data.id);\n        }\n        this.setState({ redirect: true });\n      })\n      .catch(err => {\n        return Swal.fire({\n          type: 'error',\n          title: 'Ops! algo deu errado',\n          text: err.response.data.error.message\n        });\n      });\n  };\n\n  render() {\n    const styleLinks = {\n      margin: '2em'\n    };\n    if (this.state.redirect) {\n      return <Redirect to=\"/pet\" />;\n    }\n    return (\n      <Fragment>\n        <Header />\n        <center>\n          <div className=\"container\">\n            <div className=\"card\">\n              <div\n                className=\"z-depth-1 grey lighten-4 row\"\n                style={{\n                  display: 'inlineBlock',\n                  padding: 32 + 'px' + 48 + 'px' + 0 + 'px' + 48 + 'px',\n                  border: 1 + 'px solid  #EEE'\n                }}\n              >\n                <h5 className=\"indigo-text\">Login</h5>\n                <form\n                  className=\"col s12\"\n                  method=\"post\"\n                  onSubmit={this.handleSignIn}\n                >\n                  <div className=\"container\">\n                    <div className=\"row\">\n                      <div>\n                        <TextInput\n                          s={12}\n                          icon=\"account_box\"\n                          label=\"Nome de usuário ou E-mail\"\n                          name=\"name\"\n                          success=\"\"\n                          required\n                          value={this.state.name}\n                          onChange={e => {\n                            this.handleChange(e);\n                          }}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"container\">\n                    <div className=\"row\">\n                      <TextInput\n                        s={12}\n                        password\n                        validate\n                        icon=\"lock\"\n                        label=\"Senha\"\n                        name=\"password\"\n                        error=\"Insira uma senha\"\n                        success=\"\"\n                        required\n                        onChange={e => {\n                          this.handleChange(e);\n                        }}\n                      />\n                    </div>\n                  </div>\n                  <br />\n                  <center>\n                    <div className=\"row\">\n                      <button\n                        type=\"submit\"\n                        name=\"btn_login\"\n                        className=\"col s6 btn btn-large waves-effect indigo\"\n                        style={{ float: 'none', marginBottom: '1em' }}\n                      >\n                        Entrar\n                      </button>\n                    </div>\n                  </center>\n                </form>\n              </div>\n            </div>\n            <div className=\"container\" style={styleLinks}>\n              <div className=\"container\">\n                <Link to=\"/pet/esqueceuSenha\" className=\"pink-text left\">\n                  <b>Esqueceu sua senha?</b>\n                </Link>\n                <Link to=\"/pet/cadastro\" className=\"blue-text right\">\n                  <b>Criar uma conta</b>\n                </Link>\n              </div>\n            </div>\n          </div>\n        </center>\n      </Fragment>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}