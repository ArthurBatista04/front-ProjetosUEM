{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/arthur/UEM/DesenvolvimentoPET/pet-ui/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/home/arthur/UEM/DesenvolvimentoPET/pet-ui/src/Components/Eventos/DadosAdiconais/confirmacaoInscrito.js\";\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  display: block;\\n  margin: 0 auto;\\n  border-color: white;\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component, Fragment } from \"react\";\nimport Axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport { Redirect } from \"react-router-dom\";\nimport DadosAdicionais from \"./dadosAdicionais\";\nimport PathName from \"../../pathConst\";\nimport Header from \"../../Header/Header\";\nimport formatDate from \"../formatDate\";\nimport { Row, Col } from \"react-materialize\";\nimport { css } from \"@emotion/core\";\nimport ClipLoader from \"react-spinners/ClipLoader\";\nconst override = css(_templateObject());\n\nclass confirmaçãoInscrito extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.buildRow = (key, value) => React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(Col, {\n      s: 12,\n      m: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      className: \"left hide-on-small-and-down\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, key), React.createElement(\"b\", {\n      className: \"really-center-span hide-on-med-and-up\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, key)), React.createElement(Col, {\n      s: 12,\n      m: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"right hide-on-small-and-down\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, value), React.createElement(\"span\", {\n      className: \"really-center-span hide-on-med-and-up\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, value)));\n\n    this.state = {\n      usuario: [],\n      evento: [],\n      success: false,\n      valoresEvento: [],\n      voltarDadosAdicionais: false,\n      voltarEvento: false,\n      Token: {}\n    };\n\n    this.formatValor = valor => {\n      return valor === 0 ? \"Gratuito\" : \"R$ \".concat(valor);\n    };\n\n    this.getStyleButton = () => {\n      const success = this.state.success;\n      return !success ? \"btn blue lighten-1 right\" : \"btn green right\";\n    };\n\n    this.getTime = time => {\n      return time.substring(11, 16);\n    };\n\n    this.handleClickVoltar = () => {\n      const evento = this.state.evento;\n\n      if (evento.hasDadoAdicional) {\n        this.setState({\n          voltarDadosAdicionais: true\n        });\n      } else {\n        this.setState({\n          voltarEvento: true\n        });\n      }\n    };\n\n    this.handleClick = () => {\n      const _this$props = this.props,\n            respostas = _this$props.respostas,\n            idEvento = _this$props.idEvento;\n      this.setState({\n        sendState: true\n      });\n      const newInscrito = {\n        pago: false,\n        cargaHoraria: 0,\n        usuarioId: this.state.usuario.id,\n        eventoId: idEvento\n      };\n      Axios.post(\"http://\".concat(PathName, \"/pet/api/Inscritos\"), newInscrito, this.state.Token).then(async res => {\n        const status = await res.status;\n\n        if (status >= 200 && status < 300) {\n          const inscritoId = res.data.id;\n\n          if (respostas.length === 0) {\n            // se o evento não possui dados adicionais\n            this.setState({\n              voltarEvento: true\n            });\n            this.setState({\n              sendState: false,\n              success: true\n            });\n            return Swal.fire({\n              type: \"success\",\n              title: \"Inscrição realizada com sucesso\"\n            });\n          } else {\n            respostas.map(resp => resp.inscritoId = inscritoId);\n            Axios.post(\"http://\".concat(PathName, \"/pet/api/Respostas/array\"), {\n              data: respostas\n            }, this.state.Token).then(resp => {\n              this.setState({\n                sendState: false,\n                success: true\n              });\n              this.setState({\n                voltarEvento: true\n              });\n              return Swal.fire({\n                type: \"success\",\n                title: \"Inscrição realizada com sucesso\",\n                text: \"Foi enviado uma confirmação de inscrição da atividade para seu e-mail\"\n              });\n            }).catch(err => {\n              this.setState({\n                sendState: false\n              });\n              return Swal.fire({\n                type: \"error\",\n                title: \"Ops! algo deu errado\",\n                text: err.response.data.message\n              });\n            });\n          }\n        }\n      }).catch(err => {\n        this.setState({\n          sendState: false\n        });\n        return Swal.fire({\n          type: \"error\",\n          title: \"Ops! algo deu errado\",\n          text: err.response.data.error.message\n        });\n      });\n    };\n  }\n\n  componentWillMount() {\n    const idEvento = this.props.idEvento;\n    const userID = localStorage.getItem(\"user_id\");\n    const token = localStorage.getItem(\"access_token\");\n    const Token = {\n      headers: {\n        Authorization: token\n      }\n    };\n    const filterEvento = {\n      include: \"valores\"\n    };\n    this.setState({\n      Token: Token\n    });\n    Axios.all([Axios.get(\"http://\".concat(PathName, \"/pet/api/Usuarios/\").concat(userID), Token), Axios.get(\"http://\".concat(PathName, \"/pet/api/Eventos/\").concat(idEvento, \"?filter=\").concat(JSON.stringify(filterEvento)))]).then(Axios.spread((usuarioRes, eventoRes) => {\n      this.setState({\n        usuario: usuarioRes.data,\n        evento: eventoRes.data,\n        valoresEvento: eventoRes.data.valores\n      });\n    }));\n  }\n\n  render() {\n    const _this$state = this.state,\n          usuario = _this$state.usuario,\n          evento = _this$state.evento,\n          valoresEvento = _this$state.valoresEvento,\n          voltarDadosAdicionais = _this$state.voltarDadosAdicionais,\n          voltarEvento = _this$state.voltarEvento;\n    const idEvento = this.props.idEvento;\n\n    if (voltarDadosAdicionais) {\n      return React.createElement(DadosAdicionais, {\n        idEvento: idEvento,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      });\n    }\n\n    if (voltarEvento) {\n      return React.createElement(Redirect, {\n        to: \"/pet/eventos/\".concat(idEvento),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-panel z-depth-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"sobre\",\n      className: \"col s12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"material-icons left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"person\"), \"Suas informa\\xE7\\xF5es\"), React.createElement(\"div\", {\n      className: \"basicInfo grey-text text-darken-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: {\n        textTransform: \"capitalize\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, this.buildRow(\"Nome:\", String(usuario.nome).toLowerCase())), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }), this.buildRow(\"CPF:\", usuario.cpf), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }), this.buildRow(\"E-mail:\", usuario.email), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    })), React.createElement(\"h5\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"material-icons left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"event\"), \"Informa\\xE7\\xF5es do\\n                evento \".concat(evento.nome)), React.createElement(\"div\", {\n      className: \"basicInfo grey-text text-darken-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, this.buildRow(\"Inicio do evento:\", formatDate(String(evento.dataInicio))), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }), this.buildRow(\"Término do evento:\", formatDate(String(evento.dataFim))), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }), evento.inicioInscricoes ? React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, this.buildRow(\"Inicio das inscrições:\", \"\".concat(formatDate(String(evento.inicioInscricoes)), \" \\xE0s \").concat(this.getTime(String(evento.inicioInscricoes)))), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    })) : null, evento.fimInscricoes ? React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, this.buildRow(\"Término das inscrições:\", \"\".concat(formatDate(String(evento.fimInscricoes)), \" \\xE0s \").concat(this.getTime(String(evento.fimInscricoes)))), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    })) : null, valoresEvento.map(valor => React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, this.buildRow(valor.nome, this.formatValor(valor.preco)), React.createElement(\"hr\", {\n      className: \"style-six\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"card-action\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sweet-loading\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.handleClick,\n      className: this.getStyleButton(),\n      style: {\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        width: \"150px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, this.state.sendState ? React.createElement(ClipLoader, {\n      css: override,\n      sizeUnit: \"px\",\n      size: 25,\n      color: \"white\",\n      loading: this.state.sendState,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }) : \"Confirmar\"), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn blue lighten-1 left\",\n      onClick: this.handleClickVoltar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, \"Voltar\")))))));\n  }\n\n}\n\nexport default confirmaçãoInscrito;","map":{"version":3,"sources":["/home/arthur/UEM/DesenvolvimentoPET/pet-ui/src/Components/Eventos/DadosAdiconais/confirmacaoInscrito.js"],"names":["React","Component","Fragment","Axios","Swal","Redirect","DadosAdicionais","PathName","Header","formatDate","Row","Col","css","ClipLoader","override","confirmaçãoInscrito","buildRow","key","value","state","usuario","evento","success","valoresEvento","voltarDadosAdicionais","voltarEvento","Token","formatValor","valor","getStyleButton","getTime","time","substring","handleClickVoltar","hasDadoAdicional","setState","handleClick","props","respostas","idEvento","sendState","newInscrito","pago","cargaHoraria","usuarioId","id","eventoId","post","then","res","status","inscritoId","data","length","fire","type","title","map","resp","text","catch","err","response","message","error","componentWillMount","userID","localStorage","getItem","token","headers","Authorization","filterEvento","include","all","get","JSON","stringify","spread","usuarioRes","eventoRes","valores","render","textTransform","String","nome","toLowerCase","cpf","email","dataInicio","dataFim","inicioInscricoes","fimInscricoes","preco","textOverflow","whiteSpace","overflow","width"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport Axios from \"axios\";\nimport Swal from \"sweetalert2\";\nimport { Redirect } from \"react-router-dom\";\nimport DadosAdicionais from \"./dadosAdicionais\";\nimport PathName from \"../../pathConst\";\nimport Header from \"../../Header/Header\";\nimport formatDate from \"../formatDate\";\nimport { Row, Col } from \"react-materialize\";\nimport { css } from \"@emotion/core\";\nimport ClipLoader from \"react-spinners/ClipLoader\";\nconst override = css`\n  display: block;\n  margin: 0 auto;\n  border-color: white;\n`;\nclass confirmaçãoInscrito extends Component {\n  componentWillMount() {\n    const { idEvento } = this.props;\n    const userID = localStorage.getItem(\"user_id\");\n    const token = localStorage.getItem(\"access_token\");\n    const Token = {\n      headers: {\n        Authorization: token\n      }\n    };\n    const filterEvento = {\n      include: \"valores\"\n    };\n    this.setState({ Token: Token });\n    Axios.all([\n      Axios.get(`http://${PathName}/pet/api/Usuarios/${userID}`, Token),\n      Axios.get(\n        `http://${PathName}/pet/api/Eventos/${idEvento}?filter=${JSON.stringify(\n          filterEvento\n        )}`\n      )\n    ]).then(\n      Axios.spread((usuarioRes, eventoRes) => {\n        this.setState({\n          usuario: usuarioRes.data,\n          evento: eventoRes.data,\n          valoresEvento: eventoRes.data.valores\n        });\n      })\n    );\n  }\n\n  buildRow = (key, value) => (\n    <Row>\n      <Col s={12} m={6}>\n        <b className=\"left hide-on-small-and-down\">{key}</b>\n        <b className=\"really-center-span hide-on-med-and-up\">{key}</b>\n      </Col>\n\n      <Col s={12} m={6}>\n        <span className=\"right hide-on-small-and-down\">{value}</span>\n        <span className=\"really-center-span hide-on-med-and-up\">{value}</span>\n      </Col>\n    </Row>\n  );\n\n  state = {\n    usuario: [],\n    evento: [],\n    success: false,\n    valoresEvento: [],\n    voltarDadosAdicionais: false,\n    voltarEvento: false,\n    Token: {}\n  };\n\n  formatValor = valor => {\n    return valor === 0 ? \"Gratuito\" : `R$ ${valor}`;\n  };\n  getStyleButton = () => {\n    const { success } = this.state;\n    return !success ? \"btn blue lighten-1 right\" : \"btn green right\";\n  };\n\n  getTime = time => {\n    return time.substring(11, 16);\n  };\n\n  handleClickVoltar = () => {\n    const { evento } = this.state;\n    if (evento.hasDadoAdicional) {\n      this.setState({ voltarDadosAdicionais: true });\n    } else {\n      this.setState({ voltarEvento: true });\n    }\n  };\n\n  handleClick = () => {\n    const { respostas, idEvento } = this.props;\n    this.setState({ sendState: true });\n    const newInscrito = {\n      pago: false,\n      cargaHoraria: 0,\n      usuarioId: this.state.usuario.id,\n      eventoId: idEvento\n    };\n    Axios.post(\n      `http://${PathName}/pet/api/Inscritos`,\n      newInscrito,\n      this.state.Token\n    )\n      .then(async res => {\n        const status = await res.status;\n        if (status >= 200 && status < 300) {\n          const inscritoId = res.data.id;\n          if (respostas.length === 0) {\n            // se o evento não possui dados adicionais\n            this.setState({ voltarEvento: true });\n            this.setState({ sendState: false, success: true });\n            return Swal.fire({\n              type: \"success\",\n              title: \"Inscrição realizada com sucesso\"\n            });\n          } else {\n            respostas.map(resp => (resp.inscritoId = inscritoId));\n            Axios.post(\n              `http://${PathName}/pet/api/Respostas/array`,\n              { data: respostas },\n              this.state.Token\n            )\n              .then(resp => {\n                this.setState({ sendState: false, success: true });\n                this.setState({ voltarEvento: true });\n                return Swal.fire({\n                  type: \"success\",\n                  title: \"Inscrição realizada com sucesso\",\n                  text:\n                    \"Foi enviado uma confirmação de inscrição da atividade para seu e-mail\"\n                });\n              })\n              .catch(err => {\n                this.setState({ sendState: false });\n                return Swal.fire({\n                  type: \"error\",\n                  title: \"Ops! algo deu errado\",\n                  text: err.response.data.message\n                });\n              });\n          }\n        }\n      })\n      .catch(err => {\n        this.setState({ sendState: false });\n        return Swal.fire({\n          type: \"error\",\n          title: \"Ops! algo deu errado\",\n          text: err.response.data.error.message\n        });\n      });\n  };\n\n  render() {\n    const {\n      usuario,\n      evento,\n      valoresEvento,\n      voltarDadosAdicionais,\n      voltarEvento\n    } = this.state;\n    const { idEvento } = this.props;\n    if (voltarDadosAdicionais) {\n      return <DadosAdicionais idEvento={idEvento} />;\n    }\n    if (voltarEvento) {\n      return <Redirect to={`/pet/eventos/${idEvento}`} />;\n    }\n    return (\n      <Fragment>\n        <Header />\n        <div className=\"container\">\n          <div className=\"card-panel z-depth-2\">\n            <div className=\"row\">\n              <div id=\"sobre\" className=\"col s12\" />\n              <h5>\n                <i className=\"material-icons left\">person</i>Suas informações\n              </h5>\n              <div className=\"basicInfo grey-text text-darken-2\">\n                <span style={{ textTransform: \"capitalize\" }}>\n                  {this.buildRow(\"Nome:\", String(usuario.nome).toLowerCase())}\n                </span>\n                <hr className=\"style-six\" />\n                {this.buildRow(\"CPF:\", usuario.cpf)}\n                <hr className=\"style-six\" />\n                {this.buildRow(\"E-mail:\", usuario.email)}\n                <hr className=\"style-six\" />\n              </div>\n              <h5>\n                <i className=\"material-icons left\">event</i>\n                {`Informações do\n                evento ${evento.nome}`}\n              </h5>\n              <div className=\"basicInfo grey-text text-darken-2\">\n                {this.buildRow(\n                  \"Inicio do evento:\",\n                  formatDate(String(evento.dataInicio))\n                )}\n                <hr className=\"style-six\" />\n                {this.buildRow(\n                  \"Término do evento:\",\n                  formatDate(String(evento.dataFim))\n                )}\n                <hr className=\"style-six\" />\n                {evento.inicioInscricoes ? (\n                  <Fragment>\n                    {this.buildRow(\n                      \"Inicio das inscrições:\",\n                      `${formatDate(\n                        String(evento.inicioInscricoes)\n                      )} às ${this.getTime(String(evento.inicioInscricoes))}`\n                    )}\n                    <hr className=\"style-six\" />\n                  </Fragment>\n                ) : null}\n                {evento.fimInscricoes ? (\n                  <Fragment>\n                    {this.buildRow(\n                      \"Término das inscrições:\",\n                      `${formatDate(\n                        String(evento.fimInscricoes)\n                      )} às ${this.getTime(String(evento.fimInscricoes))}`\n                    )}\n                    <hr className=\"style-six\" />\n                  </Fragment>\n                ) : null}\n                {valoresEvento.map(valor => (\n                  <Fragment>\n                    {this.buildRow(valor.nome, this.formatValor(valor.preco))}\n                    <hr className=\"style-six\" />\n                  </Fragment>\n                ))}\n              </div>\n              <div className=\"card-action\">\n                <div className=\"sweet-loading\">\n                  <button\n                    onClick={this.handleClick}\n                    className={this.getStyleButton()}\n                    style={{\n                      textOverflow: \"ellipsis\",\n                      whiteSpace: \"nowrap\",\n                      overflow: \"hidden\",\n                      width: \"150px\"\n                    }}\n                  >\n                    {this.state.sendState ? (\n                      <ClipLoader\n                        css={override}\n                        sizeUnit={\"px\"}\n                        size={25}\n                        color={\"white\"}\n                        loading={this.state.sendState}\n                      />\n                    ) : (\n                      \"Confirmar\"\n                    )}\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"btn blue lighten-1 left\"\n                    onClick={this.handleClickVoltar}\n                  >\n                    {\"Voltar\"}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nexport default confirmaçãoInscrito;\n"]},"metadata":{},"sourceType":"module"}